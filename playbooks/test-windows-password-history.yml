---
# Test playbook for win_pwd_hist_size role
# Usage: ansible-playbook -i ../inventory.ini playbooks/test-windows-password-history.yml
#
# Note: Before running, install the collection:
#   ansible-galaxy collection build
#   ansible-galaxy collection install twanus-wazuh_fixer-*.tar.gz
# Or use the role directly with: roles_path: ../roles

- name: Test Windows Password History Role
  hosts: windows
  gather_facts: true
  become: false
  # Override default if needed:
  # vars:
  #   win_pwd_hist_size_password_history_size: 24
  roles:
    # Option 1: Use relative path (works without building collection)
    - role: ../roles/win_pwd_hist_size  # noqa role-name[path]
    # Option 2: Use collection format (after building and installing):
    #   ansible-galaxy collection build
    #   ansible-galaxy collection install twanus-wazuh_fixer-*.tar.gz
    # - role: twanus.wazuh_fixer.win_pwd_hist_size
  post_tasks:
    - name: Verify role completed successfully
      ansible.builtin.debug:
        msg: "Role execution completed. Check the output above for password history configuration."
